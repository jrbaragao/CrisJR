<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dicas de Viagem Portugal - Cris & JR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; @apply bg-gray-50 text-gray-800; }
        section { scroll-margin-top: 80px; }

        /* Estilos Botões Card */
        .card-button {
            @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md transition duration-300 ease-in-out;
            cursor: pointer;
        }
        .map-button-attraction {
            @apply card-button bg-sky-600 text-white hover:bg-sky-700 hover:shadow-md;
        }
        .about-button {
             @apply card-button bg-gray-200 text-gray-700 hover:bg-gray-300 hover:shadow-sm;
        }
        .map-button-daytrip {
             @apply inline-flex items-center justify-center px-3 py-1 bg-emerald-600 text-white text-xs font-medium rounded-md transition duration-300 ease-in-out hover:bg-emerald-700 hover:shadow-sm;
             cursor: pointer;
        }

        /* Estilos Modais */
        .modal {
            @apply fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[60] opacity-0 pointer-events-none transition-opacity duration-300 ease-in-out;
        }
        .modal.is-open {
            @apply opacity-100 pointer-events-auto;
        }
        .modal-content {
            @apply bg-white rounded-lg shadow-xl w-full max-h-[85vh] overflow-hidden flex flex-col transition-transform duration-300 ease-in-out transform scale-95;
             max-width: 600px; /* Largura máxima para modal de texto */
        }
        .modal.is-open .modal-content {
            @apply scale-100;
        }
        .modal-body {
             @apply p-6 overflow-y-auto; /* Scroll se conteúdo for grande */
        }
        .modal-close-button {
             @apply text-gray-500 hover:text-gray-800 text-3xl leading-none font-light absolute top-2 right-4 z-10; /* Garantir que está acima */
             cursor: pointer;
        }

        /* Outros Estilos */
        .object-cover { object-fit: cover; background-color: #e2e8f0; }
        .attraction-card { @apply bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-all duration-300 ease-in-out hover:scale-[1.03] flex flex-col; }
        .info-box { @apply p-4 rounded-lg; }
        .section-title { @apply text-3xl font-semibold mb-8 border-b-2 pb-2; }
        .section-subtitle { @apply text-2xl font-semibold text-gray-800 mb-6 mt-10; }
    </style>
</head>
<body>

    <!-- Todo o conteúdo HTML permanece inalterado -->

    <!-- Todo conteúdo do HTML aqui... -->

    <script>
        // --- Seletores Globais ---
        const mapModalElement = document.getElementById('mapModal');
        const aboutModalElement = document.getElementById('aboutModal');
        const mapIframeElement = document.getElementById('mapIframe');
        const aboutTitleElement = document.getElementById('about-modal-title');
        const aboutVisitTimeElement = document.getElementById('about-visit-time');
        const aboutWhatToSeeElement = document.getElementById('about-what-to-see');
        const aboutHistoryElement = document.getElementById('about-history');

        // --- Funções de Controle de Modal ---
        const openModal = (modalElement) => {
            if (!modalElement) return;
            modalElement.classList.add('is-open'); // Usar apenas is-open
            document.body.style.overflow = 'hidden';
        };

        const closeModal = (modalElement) => {
            if (!modalElement) return;
            modalElement.classList.remove('is-open'); // Remover apenas is-open
            // Só restaura scroll se nenhum modal estiver aberto
            if (!mapModalElement.classList.contains('is-open') && !aboutModalElement.classList.contains('is-open')) {
                document.body.style.overflow = '';
            }
        };

        // --- Lógica Modal Mapa ---
        document.querySelectorAll('.open-map-modal').forEach(button => {
            button.addEventListener('click', () => {
                const mapUrl = button.getAttribute('data-map-url');
                if (!mapUrl) { console.error('URL do mapa não fornecida.'); return; }
                let embedUrl = mapUrl;
                if (mapUrl.includes('googleusercontent.com/maps')) {
                    console.warn('URL de placeholder detectado para mapa. Substitua data-map-url por um URL de embed real.');
                    embedUrl = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d398879.8008087465!2d-9.41481671943362!3d38.72790203898525!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd19331a61e4f33b%3A0x400ebbde49036d0!2sLisboa%2C%20Portugal!5e0!3m2!1spt-PT!2sbr!4v1678886478531!5m2!1spt-PT!2sbr'; // Fallback genérico
                }
                if(mapIframeElement) mapIframeElement.src = embedUrl;
                openModal(mapModalElement);
            });
        });

        document.getElementById('closeMapModal')?.addEventListener('click', () => {
             if(mapIframeElement) mapIframeElement.src = ''; // Limpa iframe ao fechar
             closeModal(mapModalElement);
        });

        // --- Lógica Modal Sobre ---
        document.querySelectorAll('.open-about-modal').forEach(button => {
            button.addEventListener('click', () => {
                const name = button.getAttribute('data-attraction-name');
                const time = button.getAttribute('data-visit-time');
                const see = button.getAttribute('data-what-to-see');
                const history = button.getAttribute('data-history');

                if (aboutTitleElement) aboutTitleElement.textContent = name || 'Detalhes da Atração';
                if (aboutVisitTimeElement) aboutVisitTimeElement.textContent = time || 'N/A';
                if (aboutWhatToSeeElement) aboutWhatToSeeElement.textContent = see || 'N/A';
                if (aboutHistoryElement) aboutHistoryElement.textContent = history || 'N/A';

                openModal(aboutModalElement);
            });
        });

        document.getElementById('closeAboutModal')?.addEventListener('click', () => {
             // Limpar conteúdo ao fechar (opcional)
             if (aboutTitleElement) aboutTitleElement.textContent = '...';
             if (aboutVisitTimeElement) aboutVisitTimeElement.textContent = '...';
             if (aboutWhatToSeeElement) aboutWhatToSeeElement.textContent = '...';
             if (aboutHistoryElement) aboutHistoryElement.textContent = '...';
             closeModal(aboutModalElement);
        });

        // --- Fechar Modals com ESC ou clique fora ---
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                if (mapModalElement?.classList.contains('is-open')) closeModal(mapModalElement);
                if (aboutModalElement?.classList.contains('is-open')) closeModal(aboutModalElement);
            }
        });

        [mapModalElement, aboutModalElement].forEach(modal => {
             modal?.addEventListener('click', (event) => {
                 if (event.target === modal) { // Fecha apenas se clicar no fundo
                     closeModal(modal);
                 }
             });
        });
    </script>

</body>
</html>
